# Исправление ошибок OpenAI API

## Проблема

При запуске workflow/run возникают ошибки:
1. `401 Unauthorized` - ошибка аутентификации при запросе к vector store
2. `Error while extracting response` - ошибка при обработке ответа от OpenAI API

## Причины

Ошибка **НЕ связана** с ChatController или LibreChat. Это проблема с конфигурацией OpenAI API:

1. **401 Unauthorized** - проблема с API ключом:
   - Ключ может быть недействителен или истек
   - Ключ может не иметь доступа к Vector Store API
   - Ключ может быть неправильно настроен

2. **Ошибка извлечения ответа** - OpenAI API вернул ошибку вместо ожидаемого JSON формата

## Решения

### 1. Проверьте API ключ

Убедитесь, что:
- API ключ валиден и активен
- Ключ задан через переменную окружения `OPENAI_API_KEY`
- Ключ имеет доступ к используемым моделям
- Ключ имеет доступ к Vector Store API (для RAG)

### 2. Проверьте модель

В `application.yml` должна быть правильная модель. Попробуйте:
- `gpt-4-turbo-preview` (текущая)
- `gpt-4` 
- `gpt-3.5-turbo` (если нет доступа к GPT-4)

### 3. Проверьте Vector Store

Если Vector Store недоступен, можно временно отключить RAG:
- Установите `OPENAI_VECTOR_STORE_ID=` (пустое значение)
- RAG будет пропускаться, но workflow продолжит работать

### 4. Временное решение

Если проблемы продолжаются:
1. Проверьте логи для детальной информации об ошибке
2. Попробуйте использовать другую модель
3. Временно отключите RAG (установите пустой vector-store-id)

## Важно

ChatController и LibreChat не влияют на эту ошибку - они используют тот же OpenAI API конфигуратор, что и все остальные сервисы.
